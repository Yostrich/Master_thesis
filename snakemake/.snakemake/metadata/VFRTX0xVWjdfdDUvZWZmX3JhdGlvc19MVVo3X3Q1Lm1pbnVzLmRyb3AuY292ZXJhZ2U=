{"version": null, "code": "gASVfgYAAAAAAAAoQxJ0AGQBfA58EWQCjQMBAGQAUwCUKIwFaW5wdXSUjAZvdXRwdXSUjAZwYXJhbXOUjAl3aWxkY2FyZHOUjAd0aHJlYWRzlIwJcmVzb3VyY2VzlIwDbG9nlIwHdmVyc2lvbpSMBHJ1bGWUjAljb25kYV9lbnaUjA1jb250YWluZXJfaW1nlIwQc2luZ3VsYXJpdHlfYXJnc5SMD3VzZV9zaW5ndWxhcml0eZSMC2Vudl9tb2R1bGVzlIwMYmVuY2hfcmVjb3JklIwFam9iaWSUjAhpc19zaGVsbJSMD2JlbmNoX2l0ZXJhdGlvbpSMD2NsZWFudXBfc2NyaXB0c5SMCnNoYWRvd19kaXKUjA1lZGl0X25vdGVib29rlIwPY29uZGFfYmFzZV9wYXRolIwHYmFzZWRpcpSMGHJ1bnRpbWVfc291cmNlY2FjaGVfcGF0aJSMGF9faXNfc25ha2VtYWtlX3J1bGVfZnVuY5R0lF2UKE5Y8AQAAAogICAgICAgIGJlZEZpbGU9JChiZWR0b29scyBiYW10b2JlZCAtaSB7aW5wdXRbMl19IHwgc29ydCAtazEsMSAtazIsMm4pCiAgICAgICAgcG9zQmVkRmlsZT0kKGdyZXAgLXcgIi0iIDwoZWNobyAiJGJlZEZpbGUiKSkKICAgICAgICBbICEgLWUge291dHB1dH0gXSB8fCBybSB7b3V0cHV0fQogICAgICAgID4ge291dHB1dH0KCiAgICAgICAgc29ydCAtdCAnLCcgLWsxNSAtbiAtdSB7aW5wdXRbMF19IHwgYXdrIC1GICcsJyAnTlI+MSB7e3ByaW50ICQyLCAkMTV9fScgfCB3aGlsZSByZWFkIC1yIGNociBwZWFrOwogICAgICAgIGRvCiAgICAgICAgICAgIGdlbm9tZUNvdkZpbGU9JChiZWR0b29scyBnZW5vbWVjb3YgLWcge2lucHV0WzFdfSAtaSA8KGVjaG8gIiRwb3NCZWRGaWxlIikgLWQpCgogICAgICAgICAgICBkb3duc3RyZWFtVFRTYXZlcmFnZUNvdmVyYWdlPSQoYXdrIC12IFRUUz0iJHBlYWsiICckMiA8IFRUUyAmJiAkMiA+PSBUVFMtMjAnIDwoZWNobyAiJGdlbm9tZUNvdkZpbGUiKSB8ICAgICAgICAgICAgIGF3ayAtdiBUVFM9IiRwZWFrIiAne3t0b3RhbCArPSAkM319IEVORCB7e3ByaW50IFRUUywgVFRTLTIwLCB0b3RhbC9OUn19JykKICAgICAgICAgICAgdXBzdHJlYW1UVFNhdmVyYWdlQ292ZXJhZ2U9JChhd2sgLXYgVFRTPSIkcGVhayIgJyQyID4gVFRTICYmICQyIDw9IFRUUysyMCcgPChlY2hvICIkZ2Vub21lQ292RmlsZSIpIHwgICAgICAgICAgICBhd2sgLXYgVFRTPSIkcGVhayIgJ3t7dG90YWwgKz0gJDN9fSBFTkQge3twcmludCBUVFMsIFRUUysyMCwgdG90YWwvTlJ9fScpCiAgICAgICAgICAgIHVwc3RyZWFtVmFsdWU9JChhd2sgJ3t7IHByaW50ICQzIH19JyA8KGVjaG8gIiR1cHN0cmVhbVRUU2F2ZXJhZ2VDb3ZlcmFnZSIpKQoKICAgICAgICAgICAgaWYgKCggJChlY2hvICR1cHN0cmVhbVZhbHVlJz4nMCB8IGJjIC1sKSApKTsKICAgICAgICAgICAgdGhlbgogICAgICAgICAgICAgICAgcGFzdGUgLWQgIiAiIDwoZWNobyAiJHVwc3RyZWFtVFRTYXZlcmFnZUNvdmVyYWdlIikgPChlY2hvICIkZG93bnN0cmVhbVRUU2F2ZXJhZ2VDb3ZlcmFnZSIpIHwgICAgICAgICAgICAgICAgYXdrIC12IGNocj0kY2hyICd7e3ByaW50IGNociwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDYvJDMsIDEtJDYvJDN9fScgfCAgICAgICAgICAgICAgICBhd2sgJ3t7IGlmKCQ5ID49IHtwYXJhbXMudH0pIHt7IHByaW50IH19IH19JyA+PiB7b3V0cHV0fQogICAgICAgICAgICBmaQogICAgICAgIGRvbmUKICAgICAgICCUaA9oEoaUZYwFc2hlbGyUhZR0lC4=", "rule": "NegEffRatios", "input": ["BAM_files_LUZ7/LUZ7_enriched_t5.sorted.bam", "LUZ7_genome.txt", "LUZ7_peak_calling/LUZ7_enriched_t5.3end.minus.peaks.oracle.narrowPeak.counts.clustered.csv"], "log": [], "params": ["0.2"], "shellcmd": "\n        bedFile=$(bedtools bamtobed -i BAM_files_LUZ7/LUZ7_enriched_t5.sorted.bam | sort -k1,1 -k2,2n)\n        posBedFile=$(grep -w \"-\" <(echo \"$bedFile\"))\n        [ ! -e TTS_LUZ7_t5/eff_ratios_LUZ7_t5.minus.drop.coverage ] || rm TTS_LUZ7_t5/eff_ratios_LUZ7_t5.minus.drop.coverage\n        > TTS_LUZ7_t5/eff_ratios_LUZ7_t5.minus.drop.coverage\n\n        sort -t ',' -k15 -n -u LUZ7_peak_calling/LUZ7_enriched_t5.3end.minus.peaks.oracle.narrowPeak.counts.clustered.csv | awk -F ',' 'NR>1 {print $2, $15}' | while read -r chr peak;\n        do\n            genomeCovFile=$(bedtools genomecov -g LUZ7_genome.txt -i <(echo \"$posBedFile\") -d)\n\n            downstreamTTSaverageCoverage=$(awk -v TTS=\"$peak\" '$2 < TTS && $2 >= TTS-20' <(echo \"$genomeCovFile\") |             awk -v TTS=\"$peak\" '{total += $3} END {print TTS, TTS-20, total/NR}')\n            upstreamTTSaverageCoverage=$(awk -v TTS=\"$peak\" '$2 > TTS && $2 <= TTS+20' <(echo \"$genomeCovFile\") |            awk -v TTS=\"$peak\" '{total += $3} END {print TTS, TTS+20, total/NR}')\n            upstreamValue=$(awk '{ print $3 }' <(echo \"$upstreamTTSaverageCoverage\"))\n\n            if (( $(echo $upstreamValue'>'0 | bc -l) ));\n            then\n                paste -d \" \" <(echo \"$upstreamTTSaverageCoverage\") <(echo \"$downstreamTTSaverageCoverage\") |                awk -v chr=$chr '{print chr, $1, $2, $3, $4, $5, $6, $6/$3, 1-$6/$3}' |                awk '{ if($9 >= 0.2) { print } }' >> TTS_LUZ7_t5/eff_ratios_LUZ7_t5.minus.drop.coverage\n            fi\n        done\n        ", "incomplete": false, "starttime": 1665750951.4813168, "endtime": 1665750966.934417, "job_hash": 8768015914073, "conda_env": null, "container_img_url": null, "input_checksums": {"LUZ7_peak_calling/LUZ7_enriched_t5.3end.minus.peaks.oracle.narrowPeak.counts.clustered.csv": "de68d49042b4fd1b9946084a1326f58e8a8d95b29562069d47fc9663784742b3", "LUZ7_genome.txt": "d04b4a7cf1dc79ec845bc44e62e76b878989cd17e6fc8b793913eb52d23a662c"}}